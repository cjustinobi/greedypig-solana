"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{8308:function(e,a,t){var n=t(7821);a.Z=e=>{let{label:a,onClick:t,type:r="button",className:s="",disabled:i=!1}=e;return(0,n.jsx)("button",{disabled:i,type:r,onClick:t,className:"inline-block border-4 border-white rounded-full px-6 py-3 font-Coiny-Regular text-lg text-white text-center transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed ".concat(s),children:a})}},1632:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});var n=t(7821);t(3198);var r=t(8008),s=t.n(r),i=t(2153),o=t.n(i),l={src:"/_next/static/media/gameitemsimg.c8c75a59.png",height:115,width:125,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAA70lEQVR4nAVAu0rDUBj+/l7UkpLYaFQQRUFRYpcWUQyITyCIk5vg6gM4+CCOziJOriqCiFjnRDqEXmiztE2hJ6RNk5O/0Pfbu13SFLPlNrjWr9BTR0EUx+wKJsjUodrnBxtLBoTfheOpuPrbxv0+47KS4Oc/Bj0+vKROc0q7GxomkiGWLVwctGHu6IinYDq/eeZXuw11bR1W1cKRNsTJpofTs0Pksww6vnPTBRlQQTWQmS8irH+hlAQob2WwahSZqrc2j8UAoe8hlRJRKFDWE8h8AW5PgPauf+2R3zWjScCcnSNlcQUyl2OdA5L9hjMDODdraYAM6RMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:7},c={src:"/_next/static/media/gameitemspeople.cc211656.png",height:13,width:12,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAAqklEQVR42k1PIQ7CQBAsmCJwvAKDw1Xxjrp+AYuAkOb27hZ6t4cEXSwvqkRAggGBgTkuEDaZzGRnJpvN4qja5so0o6gj1xuTZ98hK07b0NVqN4TuNIfm36yAI7EriKUFqo+BRqlZ7jAP2soZvIf5QLvMiH2B5Q1Lpax4sn5NMWRkltrsp2hfiMMLwas2YfK7OV9QH+kWeAKnpfaD9IZ1PVDSxo1XepsnLb03fZdZKcqUWBsAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},m={src:"/_next/static/media/gameitemsclock.acc4e7be.png",height:13,width:12,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAAqklEQVR42jWPQQrCMBBFh4J4hq51p1dw1asULyEootBkkiBN0hN4DZcudalrQQS7VA9Q/4Q28Jj582fCDJlDkxHeTrmRNn6+2ddj0cwx1UnbsGAXLogvcANFMtA9gfhoG3/gxC520I+KfU4Qy75wVyasEFs0daAk7UIJRHxhHJGfk4kh0lznKD5legANLZiSPCSFfAvebMNVFkxG1a+8xQnK+NkaJ4lm02R/3XZpuXx/VZUAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},u=t(9366),d=t(8308),g=t(8103);let p=(e,a)=>!!e&&!!a&&e.some(e=>e.equals(a));var y=e=>{var a,t,r;let{account:i}=e,{publicKey:y}=(0,g.O)(),{joinGame:x}=(0,u.x)(),{accountQuery:A}=(0,u.X)({account:i}),h=async e=>{if(y){let a=await x.mutateAsync({gameAccount:e});console.log("result from joingame ",a)}},f="pending"===x.status,w=p(null===(a=A.data)||void 0===a?void 0:a.players,y);return(0,n.jsxs)("div",{className:"w-full lg:w-[290px] h-[147px] bg-custom-gray8 flex flex-row justify-between rounded-3xl p-4 gap-3",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(s(),{className:"rounded-2xl",src:l,width:125,height:115,alt:"gameitemsimg"})}),(0,n.jsxs)("div",{className:"w-[113px] h-[115px] flex flex-col justify-between",children:[(0,n.jsxs)("div",{className:"w-[113px] h-16 flex flex-col justify-between gap-2",children:[(0,n.jsx)("div",{className:"w-[113px] h-[25px]",children:(0,n.jsx)(o(),{className:"font-WorkSans-SemiBold font-semibold text-xl/[25px]",href:"/games/".concat(i.toBase58()),children:null===(t=A.data)||void 0===t?void 0:t.title})}),(0,n.jsxs)("div",{className:"w-[95px] h-[31px] gap-2 flex flex-row",children:[(0,n.jsxs)("div",{className:"w-[39px] h-[31px] bg-custom-gray7 flex text-custom-gray5 rounded-lg p-2 gap-1",children:[(0,n.jsx)(s(),{src:c,width:12,height:12,alt:"gameitemsimg"}),(0,n.jsx)("p",{className:"w-[7px] h-[15px] font-WorkSans-Medium font-medium text-xs/[15px]",children:null===(r=A.data)||void 0===r?void 0:r.players.length})]}),(0,n.jsxs)("div",{className:"w-12 h-[31px] bg-custom-gray7 flex text-custom-gray5 rounded-lg p-2 gap-1",children:[(0,n.jsx)(s(),{src:m,width:12,height:12,alt:"gameitemsimg"}),(0,n.jsx)("p",{className:"w-4 h-[15px] font-WorkSans-Medium font-medium text-xs/[15px]",children:"2H"})]})]})]}),(0,n.jsx)("div",{className:"w-[113px] h-[34px] bg-[#8621FF] flex justify-center items-center rounded-3xl border px-6 py-2 gap-2.5",children:w?(0,n.jsx)(d.Z,{label:"Joined",className:"font-Coiny-Regular font-normal text-white text-sm/[17.5px]",disabled:!0}):(0,n.jsx)(d.Z,{label:f?"Joining...":"Join",onClick:()=>h(i),className:"font-Coiny-Regular font-normal text-white text-sm/[17.5px]",disabled:f})})]})]})},x=()=>{var e;let{accounts:a,getProgramAccount:t}=(0,u.x)();return(0,n.jsxs)("section",{className:"bg-custom-gray7 flex flex-col w-full rounded-3xl text-white p-6 gap-6",children:[(0,n.jsx)("div",{className:"h-[38px]",children:(0,n.jsx)("p",{className:"w-[167px] h-[26px] font-Coiny-Regular font-normal text-2xl/[26.4px]",children:"Latest games"})}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:null===(e=a.data)||void 0===e?void 0:e.map(e=>(0,n.jsx)(y,{account:e.publicKey},e.publicKey.toString()))})]})}},9366:function(e,a,t){t.d(a,{x:function(){return x},X:function(){return A}});var n=t(6353),r=t(6299),s=JSON.parse('{"address":"2MKHvQoStSV7tx6ywCSgGVoe7mhowfaQxnupbbUiNFmm","metadata":{"name":"greedy_pig","version":"0.1.0","spec":"0.1.0","description":"Created with Anchor"},"instructions":[{"name":"create_game","discriminator":[124,69,75,66,184,220,72,206],"accounts":[{"name":"game_account","writable":true,"pda":{"seeds":[{"kind":"arg","path":"title"},{"kind":"account","path":"owner"}]}},{"name":"owner","writable":true,"signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"title","type":"string"},{"name":"winning_score","type":"u64"},{"name":"staking_amount","type":"u64"},{"name":"apparatus","type":"string"},{"name":"mode","type":"string"},{"name":"max_players","type":"u8"}]},{"name":"get_games_by_owner","discriminator":[103,53,187,211,115,228,15,105],"accounts":[{"name":"owner","signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[],"returns":{"vec":{"defined":{"name":"GameAccountState"}}}},{"name":"join_game","discriminator":[107,112,18,38,56,173,60,128],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[]},{"name":"pass_turn","discriminator":[224,215,57,43,234,162,75,182],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true}],"args":[]},{"name":"play_turn","discriminator":[116,200,44,67,23,228,209,99],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true}],"args":[{"name":"roll_result","type":"u8"}]},{"name":"start_game","discriminator":[249,47,252,172,184,162,245,14],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true}],"args":[]}],"accounts":[{"name":"GameAccountState","discriminator":[134,141,26,149,244,232,229,119]}],"errors":[{"code":6000,"name":"GameFull","msg":"The game is already full"},{"code":6001,"name":"PlayerAlreadyJoined","msg":"Player has already joined this game"},{"code":6002,"name":"InvalidApparatus","msg":"Invalid apparatus specified"},{"code":6003,"name":"InvalidGameMode","msg":"Invalid game mode specified"},{"code":6004,"name":"GameAlreadyStarted","msg":"Game has already started"},{"code":6005,"name":"NotEnoughPlayers","msg":"Not enough players to start the game"},{"code":6006,"name":"GameNotInProgress","msg":"Game is not in progress"},{"code":6007,"name":"NotPlayerTurn","msg":"It\'s not this player\'s turn"},{"code":6008,"name":"PlayerNotFound","msg":"Player not found in the game"}],"types":[{"name":"GameAccountState","type":{"kind":"struct","fields":[{"name":"title","type":"string"},{"name":"winning_score","type":"u64"},{"name":"staking_amount","type":"u64"},{"name":"apparatus","type":"string"},{"name":"mode","type":"string"},{"name":"owner","type":"pubkey"},{"name":"players","type":{"vec":"pubkey"}},{"name":"max_players","type":"u8"},{"name":"current_player_index","type":"u8"},{"name":"game_state","type":{"defined":{"name":"GameState"}}},{"name":"leaderboard","type":{"vec":{"defined":{"name":"PlayerScore"}}}}]}},{"name":"GameState","type":{"kind":"enum","variants":[{"name":"WaitingForPlayers"},{"name":"InProgress"},{"name":"Finished"}]}},{"name":"PlayerScore","type":{"kind":"struct","fields":[{"name":"player","type":"pubkey"},{"name":"temp_score","type":"u64"},{"name":"final_score","type":"u64"}]}}]}');let i=new r.PublicKey("2MKHvQoStSV7tx6ywCSgGVoe7mhowfaQxnupbbUiNFmm");var o=t(8103),l=t(2545),c=t(8960),m=t(6933),u=t(357),d=t(767),g=t(4112),p=t(2712),y=t(3198);function x(){let{publicKey:e}=(0,o.O)(),{connection:a}=(0,l.R)(),{cluster:t}=(0,d.useCluster)(),r=(0,p.useTransactionToast)(),x=(0,g.useAnchorProvider)(),A=(0,y.useMemo)(()=>{var e;return t.network,i},[t]),h=new n.$r(s,x),f=(0,c.a)({queryKey:["greedy-pig","all",{cluster:t}],queryFn:()=>h.account.gameAccountState.all()});console.log("account ",f);let w=(0,c.a)({queryKey:["get-program-account",{cluster:t}],queryFn:()=>a.getParsedAccountInfo(A)}),b=(0,m.D)({mutationKey:["greedy-pig","create",{cluster:t}],mutationFn:async e=>{let{title:a,winning_score:t,staking_amount:r,apparatus:s,mode:i}=e,o=void 0!==t?new n.BN(t):null,l=void 0!==r?new n.BN(r):null;return h.methods.createGame(a,o,l,s,i,l).rpc()},onSuccess:e=>{r(e),f.refetch()},onError:e=>{u.ZP.error("Failed to create journal entry: ".concat(e.message))}}),v=(0,m.D)({mutationKey:["greedy-pig","join-game",{cluster:t}],mutationFn:async e=>{let{gameAccount:a}=e;return h.methods.joinGame().accounts({gameAccount:a,player:x.wallet.publicKey}).rpc()},onSuccess:e=>{r(e),f.refetch()},onError:e=>{u.ZP.error("Failed to join game: ".concat(e.message))}}),j=(0,m.D)({mutationKey:["greedy-pig","start-game",{cluster:t}],mutationFn:async e=>{let{gameAccount:a}=e;return h.methods.startGame().accounts({gameAccount:a,player:x.wallet.publicKey}).rpc()},onSuccess:e=>{r(e),f.refetch()},onError:e=>{u.ZP.error("Failed to join game: ".concat(e.message))}}),N=(0,c.a)({queryKey:["journals","byOwner",null==e?void 0:e.toBase58(),{cluster:t}],queryFn:async()=>{if(!e)throw Error("Wallet not connected");let a=await h.account.gameAccountState.all();return a.filter(a=>a.account.owner.equals(e))},enabled:!!e});return{program:h,programId:A,accounts:f,getProgramAccount:w,createGame:b,getGamsByOwner:N,joinGame:v,startGame:j}}function A(e){let{account:a}=e,{cluster:t}=(0,d.useCluster)();(0,p.useTransactionToast)();let{program:n,accounts:r}=x(),s=(0,c.a)({queryKey:["greedy-pig","fetch-account-query",{cluster:t,account:a}],queryFn:()=>n.account.gameAccountState.fetch(a)});return{accountQuery:s}}}}]);