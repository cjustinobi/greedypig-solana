(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{971:function(e,a,t){Promise.resolve().then(t.bind(t,9199))},9199:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var n=t(7821),r=t(3198),o=e=>{let{options:a,onChainTab:t,onTabChange:r}=e;return(0,n.jsx)("div",{className:"flex w-80 h-11 p-1 mx-auto bg-dark-blue font-WorkSans-ExtraBold text-base rounded-full gap-2.5 justify-between",children:a.map((e,a)=>(0,n.jsx)("button",{type:"button",className:"w-36 h-9 px-1 py-0.5 ".concat(t===e?"bg-custom-gray text-white rounded-full":"transparent text-gray-500"," focus:outline-none"),onClick:()=>r(e),children:e?"Off-chain":"On-chain"},a))})},s=e=>{let{label:a,name:t,value:r,placeholder:o,onChange:s}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block font-Inter_18pt-SemiBold text-sm font-semibold text-white mb-2",htmlFor:t,children:a}),(0,n.jsx)("input",{name:t,value:r,onChange:s,placeholder:o,className:"w-full rounded-lg border border-custom-gray3       bg-custom-gray2 text-custom-gray4 font-WorkSans-Regular       text-sm/[17.5px] px-3 py-2 outline-none ring-indigo-300 transition duration-100 focus:ring"})]})},i=e=>{let{name:a,options:t,selectedOption:r,onOptionChange:o}=e,s=e=>{o(e.target.value)};return(0,n.jsx)("div",{className:"flex gap-4",children:t.map(e=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"radio",id:"".concat(a,"-").concat(e.value),name:a,value:e.value,checked:r===e.value,onChange:s,className:"h-4 w-4"}),(0,n.jsx)("label",{htmlFor:"".concat(a,"-").concat(e.value),className:"ml-2 block font-Inter_18pt-Medium text-sm/[14px] font-medium text-white",children:e.label})]},e.value))})},l=t(8308),c=t(9366),u=t(8103),m=()=>{let[e,a]=(0,r.useState)({title:"",winningScore:"",stakingAmount:"",die:"",roulette:"",turnBased:"",scoreBased:""}),[t,m]=(0,r.useState)(!0),[d,g]=(0,r.useState)(!1),[p,y]=(0,r.useState)("dice"),[b,x]=(0,r.useState)("turn_based"),{createGame:h}=(0,c.x)(),{publicKey:f}=(0,u.O)(),v=t=>{let{name:n,value:r}=t.target;a({...e,[n]:r})},w=()=>{f&&h.mutateAsync({title:e.title,apparatus:p,mode:b,max_players:2,winning_score:Number(e.winningScore),staking_amount:Number(e.stakingAmount),owner:f})};return(0,n.jsx)("div",{className:"bg-indigo py-6 sm:py-8 lg:py-12",children:(0,n.jsx)("div",{className:"mx-auto max-w-screen-2xl px-4 md:px-8",children:(0,n.jsx)("form",{className:"w-[475px] gap-8 bg-custom-gray mx-auto max-w-lg rounded-2xl",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4 p-4 md:p-8",children:[(0,n.jsx)(o,{options:[!0,!1],onChainTab:t,onTabChange:e=>{m(e=>!e)}}),(0,n.jsx)(s,{label:"Title",name:"title",placeholder:"Title of game",value:e.title,onChange:v}),(0,n.jsx)(s,{label:"Winning score",name:"winningScore",placeholder:"e.g. 20000",value:e.winningScore,onChange:v}),!t&&(0,n.jsx)(s,{label:"Staking amount",name:"stakingAmount",placeholder:"$200",value:e.stakingAmount,onChange:v}),(0,n.jsx)("h2",{className:"block text-white font-Inter_18pt-SemiBold text-sm font-semibold",children:"Game Apparatus"}),(0,n.jsx)(i,{name:"gameApparatus",options:[{label:"Die",value:"dice"},{label:"Roulette",value:"roulette"}],selectedOption:p,onOptionChange:y}),(0,n.jsx)("h2",{className:"block text-white font-Inter_18pt-SemiBold text-sm font-semibold",children:"Mode"}),(0,n.jsx)(i,{name:"mode",options:[{label:"Turn Based",value:"turn_based"},{label:"Score Based",value:"score_based"}],selectedOption:b,onOptionChange:x}),(0,n.jsx)("div",{className:"flex w-full flex-col gap-2.5 sm:flex-row sm:justify-center",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{label:"Cancel",type:"button",onClick:()=>{alert("Button clicked!")},className:"basis-1/2 bg-orange-500 outline-none ring-indigo-300 transition hover:bg-indigo-600 focus-visible:ring active:bg-indigo-700 md:text-base",children:"Cancel"}),(0,n.jsx)(l.Z,{label:"Create game",type:"button",onClick:w,className:"basis-1/2 bg-violet-700 outline-none ring-indigo-300 transition hover:bg-orange-300 focus-visible:ring active:text-gray-700 md:text-base",children:"Create game"})]}):(0,n.jsx)(l.Z,{label:"Create game",type:"button",onClick:w,className:"w-full bg-violet-700 outline-none ring-indigo-300 transition hover:bg-orange-300 focus-visible:ring active:text-gray-700 md:text-base",children:"Create game"})})]})})})})},d=()=>(0,n.jsx)("div",{children:(0,n.jsx)(m,{})})},8308:function(e,a,t){"use strict";var n=t(7821);a.Z=e=>{let{label:a,onClick:t,type:r="button",className:o="",disabled:s=!1}=e;return(0,n.jsx)("button",{disabled:s,type:r,onClick:t,className:"inline-block border-4 border-white rounded-full px-6 py-3 font-Coiny-Regular text-lg text-white text-center transition duration-150 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed ".concat(o),children:a})}},9366:function(e,a,t){"use strict";t.d(a,{x:function(){return b},X:function(){return x}});var n=t(6353),r=t(6299),o=JSON.parse('{"address":"2MKHvQoStSV7tx6ywCSgGVoe7mhowfaQxnupbbUiNFmm","metadata":{"name":"greedy_pig","version":"0.1.0","spec":"0.1.0","description":"Created with Anchor"},"instructions":[{"name":"create_game","discriminator":[124,69,75,66,184,220,72,206],"accounts":[{"name":"game_account","writable":true,"pda":{"seeds":[{"kind":"arg","path":"title"},{"kind":"account","path":"owner"}]}},{"name":"owner","writable":true,"signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"title","type":"string"},{"name":"winning_score","type":"u64"},{"name":"staking_amount","type":"u64"},{"name":"apparatus","type":"string"},{"name":"mode","type":"string"},{"name":"max_players","type":"u8"}]},{"name":"get_games_by_owner","discriminator":[103,53,187,211,115,228,15,105],"accounts":[{"name":"owner","signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[],"returns":{"vec":{"defined":{"name":"GameAccountState"}}}},{"name":"join_game","discriminator":[107,112,18,38,56,173,60,128],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[]},{"name":"pass_turn","discriminator":[224,215,57,43,234,162,75,182],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true}],"args":[]},{"name":"play_turn","discriminator":[116,200,44,67,23,228,209,99],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true}],"args":[{"name":"roll_result","type":"u8"}]},{"name":"start_game","discriminator":[249,47,252,172,184,162,245,14],"accounts":[{"name":"game_account","writable":true},{"name":"player","signer":true}],"args":[]}],"accounts":[{"name":"GameAccountState","discriminator":[134,141,26,149,244,232,229,119]}],"errors":[{"code":6000,"name":"GameFull","msg":"The game is already full"},{"code":6001,"name":"PlayerAlreadyJoined","msg":"Player has already joined this game"},{"code":6002,"name":"InvalidApparatus","msg":"Invalid apparatus specified"},{"code":6003,"name":"InvalidGameMode","msg":"Invalid game mode specified"},{"code":6004,"name":"GameAlreadyStarted","msg":"Game has already started"},{"code":6005,"name":"NotEnoughPlayers","msg":"Not enough players to start the game"},{"code":6006,"name":"GameNotInProgress","msg":"Game is not in progress"},{"code":6007,"name":"NotPlayerTurn","msg":"It\'s not this player\'s turn"},{"code":6008,"name":"PlayerNotFound","msg":"Player not found in the game"}],"types":[{"name":"GameAccountState","type":{"kind":"struct","fields":[{"name":"title","type":"string"},{"name":"winning_score","type":"u64"},{"name":"staking_amount","type":"u64"},{"name":"apparatus","type":"string"},{"name":"mode","type":"string"},{"name":"owner","type":"pubkey"},{"name":"players","type":{"vec":"pubkey"}},{"name":"max_players","type":"u8"},{"name":"current_player_index","type":"u8"},{"name":"game_state","type":{"defined":{"name":"GameState"}}},{"name":"leaderboard","type":{"vec":{"defined":{"name":"PlayerScore"}}}}]}},{"name":"GameState","type":{"kind":"enum","variants":[{"name":"WaitingForPlayers"},{"name":"InProgress"},{"name":"Finished"}]}},{"name":"PlayerScore","type":{"kind":"struct","fields":[{"name":"player","type":"pubkey"},{"name":"temp_score","type":"u64"},{"name":"final_score","type":"u64"}]}}]}');let s=new r.PublicKey("2MKHvQoStSV7tx6ywCSgGVoe7mhowfaQxnupbbUiNFmm");var i=t(8103),l=t(2545),c=t(8960),u=t(6933),m=t(357),d=t(767),g=t(4112),p=t(2712),y=t(3198);function b(){let{publicKey:e}=(0,i.O)(),{connection:a}=(0,l.R)(),{cluster:t}=(0,d.useCluster)(),r=(0,p.useTransactionToast)(),b=(0,g.useAnchorProvider)(),x=(0,y.useMemo)(()=>{var e;return t.network,s},[t]),h=new n.$r(o,b),f=(0,c.a)({queryKey:["greedy-pig","all",{cluster:t}],queryFn:()=>h.account.gameAccountState.all()});console.log("account ",f);let v=(0,c.a)({queryKey:["get-program-account",{cluster:t}],queryFn:()=>a.getParsedAccountInfo(x)}),w=(0,u.D)({mutationKey:["greedy-pig","create",{cluster:t}],mutationFn:async e=>{let{title:a,winning_score:t,staking_amount:r,apparatus:o,mode:s}=e,i=void 0!==t?new n.BN(t):null,l=void 0!==r?new n.BN(r):null;return h.methods.createGame(a,i,l,o,s,l).rpc()},onSuccess:e=>{r(e),f.refetch()},onError:e=>{m.ZP.error("Failed to create journal entry: ".concat(e.message))}}),_=(0,u.D)({mutationKey:["greedy-pig","join-game",{cluster:t}],mutationFn:async e=>{let{gameAccount:a}=e;return h.methods.joinGame().accounts({gameAccount:a,player:b.wallet.publicKey}).rpc()},onSuccess:e=>{r(e),f.refetch()},onError:e=>{m.ZP.error("Failed to join game: ".concat(e.message))}}),j=(0,u.D)({mutationKey:["greedy-pig","start-game",{cluster:t}],mutationFn:async e=>{let{gameAccount:a}=e;return h.methods.startGame().accounts({gameAccount:a,player:b.wallet.publicKey}).rpc()},onSuccess:e=>{r(e),f.refetch()},onError:e=>{m.ZP.error("Failed to join game: ".concat(e.message))}}),S=(0,c.a)({queryKey:["journals","byOwner",null==e?void 0:e.toBase58(),{cluster:t}],queryFn:async()=>{if(!e)throw Error("Wallet not connected");let a=await h.account.gameAccountState.all();return a.filter(a=>a.account.owner.equals(e))},enabled:!!e});return{program:h,programId:x,accounts:f,getProgramAccount:v,createGame:w,getGamsByOwner:S,joinGame:_,startGame:j}}function x(e){let{account:a}=e,{cluster:t}=(0,d.useCluster)();(0,p.useTransactionToast)();let{program:n,accounts:r}=b(),o=(0,c.a)({queryKey:["greedy-pig","fetch-account-query",{cluster:t,account:a}],queryFn:()=>n.account.gameAccountState.fetch(a)});return{accountQuery:o}}}},function(e){e.O(0,[449,390,440,97,8,201,329,322,62,744],function(){return e(e.s=971)}),_N_E=e.O()}]);